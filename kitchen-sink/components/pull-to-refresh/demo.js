webpackJsonp([14,141],{6:function(n,s,a){"use strict";a(14),a(13),a(12)},11:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}s.__esModule=!0;var e=a(15),o=t(e);s["default"]=function(n){if(Array.isArray(n)){for(var s=0,a=Array(n.length);s<n.length;s++)a[s]=n[s];return a}return(0,o["default"])(n)}},12:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}var e=a(11);t(e)},13:function(n,s){},14:function(n,s){},15:function(n,s,a){n.exports={"default":a(16),__esModule:!0}},16:function(n,s,a){a(30),a(18),n.exports=a(20).Array.from},17:function(n,s,a){"use strict";var t=a(25),e=a(29);n.exports=function(n,s,a){s in n?t.f(n,s,e(0,a)):n[s]=a}},18:function(n,s,a){"use strict";var t=a(28),e=a(22),o=a(26),p=a(34),c=a(33),u=a(31),i=a(17),l=a(32);e(e.S+e.F*!a(35)(function(n){Array.from(n)}),"Array",{from:function(n){var s,a,e,r,k=o(n),d="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,g=void 0!==h,m=0,v=l(k);if(g&&(h=t(h,f>2?arguments[2]:void 0,2)),void 0==v||d==Array&&c(v))for(s=u(k.length),a=new d(s);s>m;m++)i(a,m,g?h(k[m],m):k[m]);else for(r=v.call(k),a=new d;!(e=r.next()).done;m++)i(a,m,g?p(r,h,[e.value,m],!0):e.value);return a.length=m,a}})},23:function(n,s,a){"use strict";a(36)},24:function(n,s,a){"use strict";a(6),a(38)},36:function(n,s){},38:function(n,s){},43:function(n,s,a){"use strict";a(6),a(23),a(50)},50:function(n,s){},217:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(s,"__esModule",{value:!0}),s["default"]=void 0;var e=a(2),o=t(e),p=a(3),c=t(p),u=a(5),i=t(u),l=a(4),r=t(l),k=a(1),d=t(k),f=a(267),h=t(f),g=a(233),m=t(g),v=a(309),w=t(v),y=function(n){function s(){(0,c["default"])(this,s);var a=(0,i["default"])(this,n.apply(this,arguments));return a.scrollTo=function(){var n;return(n=a.listviewRef).scrollTo.apply(n,arguments)},a.getInnerViewNode=function(){return a.listviewRef.getInnerViewNode()},a}return(0,r["default"])(s,n),s.prototype.render=function(){var n=this,s=(0,m["default"])(this.props,!1),a=s.restProps,t=s.extraProps;return d["default"].createElement(h["default"],(0,o["default"])({ref:function(s){return n.listviewRef=s}},a,t))},s}(d["default"].Component);s["default"]=y,y.defaultProps={prefixCls:"am-list-view",listPrefixCls:"am-list"},y.DataSource=h["default"].DataSource,y.IndexedList=w["default"],n.exports=s["default"]},218:function(n,s,a){"use strict";a(6),a(24),a(330)},233:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}function e(n,s){var a=n.renderHeader,t=n.renderFooter,e=n.renderSectionHeader,o=n.renderBodyComponent,c=i(n,["renderHeader","renderFooter","renderSectionHeader","renderBodyComponent"]),u=n.listPrefixCls,r={renderHeader:null,renderFooter:null,renderSectionHeader:null,renderBodyComponent:o||function(){return p["default"].createElement("div",{className:u+"-body"})}};return a&&(r.renderHeader=function(){return p["default"].createElement("div",{className:u+"-header"},a())}),t&&(r.renderFooter=function(){return p["default"].createElement("div",{className:u+"-footer"},t())}),e&&(r.renderSectionHeader=s?function(n,s){return p["default"].createElement("div",null,p["default"].createElement(l,{prefixCls:u},e(n,s)))}:function(n,s){return p["default"].createElement(l,{prefixCls:u},e(n,s))}),{restProps:c,extraProps:r}}Object.defineProperty(s,"__esModule",{value:!0}),s["default"]=e;var o=a(1),p=t(o),c=a(40),u=t(c),i=function(n,s){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&s.indexOf(t)<0&&(a[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,t=Object.getOwnPropertySymbols(n);e<t.length;e++)s.indexOf(t[e])<0&&(a[t[e]]=n[t[e]]);return a},l=u["default"].Item;n.exports=s["default"]},266:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(s,"__esModule",{value:!0});var e=a(2),o=t(e),p=a(52),c=t(p),u=a(3),i=t(u),l=a(8),r=t(l),k=a(5),d=t(k),f=a(4),h=t(f),g=a(1),m=t(g),v=a(21),w=t(v),y=a(1),S=(t(y),a(377)),_=t(S),b=a(378),R=t(b),C=1,E=10,x=1e3,T=1e3,D=50,P=function(n){function s(){return(0,i["default"])(this,s),(0,d["default"])(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return(0,h["default"])(s,n),(0,r["default"])(s,[{key:"shouldComponentUpdate",value:function(n){return n.shouldUpdate}},{key:"render",value:function(){return this.props.render()}}]),s}(m["default"].Component),L=function(n){function s(){var n,a,t,e;(0,i["default"])(this,s);for(var o=arguments.length,p=Array(o),c=0;c<o;c++)p[c]=arguments[c];return a=t=(0,d["default"])(this,(n=s.__proto__||Object.getPrototypeOf(s)).call.apply(n,[this].concat(p))),O.call(t),e=a,(0,d["default"])(t,e)}return(0,h["default"])(s,n),(0,r["default"])(s,[{key:"componentWillMount",value:function(){this.scrollProperties={visibleLength:null,contentLength:null,offset:0},this._childFrames=[],this._visibleRows={},this._prevRenderedRowsCount=0,this._sentEndForContentLength=null}},{key:"componentWillReceiveProps",value:function(n){var s=this;this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||this.setState(function(a,t){return s._prevRenderedRowsCount=0,{curRenderedRowsCount:Math.min(Math.max(a.curRenderedRowsCount,n.initialListSize),n.dataSource.getRowCount())}},function(){return s._renderMoreRowsIfNeeded()})}},{key:"render",value:function(){for(var n=this,s=this.props.dataSource,a=s.rowIdentities,t=[],e=0,p=0;p<a.length;p++){var u=s.sectionIdentities[p],i=a[p];if(0!==i.length){var l=void 0;if(this.props.renderSectionHeader){var r=e>=this._prevRenderedRowsCount&&s.sectionHeaderShouldUpdate(p);l=m["default"].createElement(P,{key:"s_"+u,shouldUpdate:!!r,render:this.props.renderSectionHeader.bind(null,s.getSectionHeaderData(p),u)})}for(var k=[],d=0;d<i.length;d++){var f=i[d],h=u+"_"+f,g=e>=this._prevRenderedRowsCount&&s.rowShouldUpdate(p,d),v=m["default"].createElement(P,{key:"r_"+h,shouldUpdate:!!g,render:this.props.renderRow.bind(null,s.getRowData(p,d),u,f,this.onRowHighlighted)});if(k.push(v),this.props.renderSeparator&&(d!==i.length-1||p===a.length-1)){var w=this.state.highlightedRow.sectionID===u&&(this.state.highlightedRow.rowID===f||this.state.highlightedRow.rowID===i[d+1]),y=this.props.renderSeparator(u,f,w);y&&k.push(y)}if(++e===this.state.curRenderedRowsCount)break}var S=m["default"].cloneElement(this.props.renderSectionBodyWrapper(u),{className:this.props.sectionBodyClassName},k);if(this.props.renderSectionWrapper?t.push(m["default"].cloneElement(this.props.renderSectionWrapper(u),{},l,S)):(t.push(l),t.push(S)),e>=this.state.curRenderedRowsCount)break}}var _=this.props,b=_.renderScrollComponent,R=(0,c["default"])(_,["renderScrollComponent"]);return m["default"].cloneElement(b((0,o["default"])({},R,{onScroll:this._onScroll})),{ref:function(s){return n.ListViewRef=s},onContentSizeChange:this._onContentSizeChange,onLayout:this._onLayout},this.props.renderHeader?this.props.renderHeader():null,m["default"].cloneElement(R.renderBodyComponent(),{},t),this.props.renderFooter?this.props.renderFooter():null,R.children)}}]),s}(m["default"].Component);L.DataSource=_["default"],L.propTypes=(0,o["default"])({},R["default"].propTypes,{dataSource:w["default"].instanceOf(_["default"]).isRequired,renderSeparator:w["default"].func,renderRow:w["default"].func.isRequired,initialListSize:w["default"].number,onEndReached:w["default"].func,onEndReachedThreshold:w["default"].number,pageSize:w["default"].number,renderFooter:w["default"].func,renderHeader:w["default"].func,renderSectionHeader:w["default"].func,renderScrollComponent:w["default"].func,scrollRenderAheadDistance:w["default"].number,onChangeVisibleRows:w["default"].func,scrollEventThrottle:w["default"].number,renderBodyComponent:w["default"].func,renderSectionWrapper:w["default"].func,renderSectionBodyWrapper:w["default"].func,sectionBodyClassName:w["default"].string,listViewPrefixCls:w["default"].string,useBodyScroll:w["default"].bool}),L.defaultProps={initialListSize:E,pageSize:C,renderScrollComponent:function(n){return m["default"].createElement(R["default"],n)},renderBodyComponent:function(){return m["default"].createElement("div",null)},renderSectionBodyWrapper:function(n){return m["default"].createElement("div",{key:n})},sectionBodyClassName:"list-view-section-body",listViewPrefixCls:"rmc-list-view",scrollRenderAheadDistance:x,onEndReachedThreshold:T,scrollEventThrottle:D,scrollerOptions:{}};var O=function(){var n=this;this.state={curRenderedRowsCount:this.props.initialListSize,highlightedRow:{}},this.getMetrics=function(){return{contentLength:n.scrollProperties.contentLength,totalRows:n.props.dataSource.getRowCount(),renderedRows:n.state.curRenderedRowsCount,visibleRows:Object.keys(n._visibleRows).length}},this.getInnerViewNode=function(){return n.ListViewRef.getInnerViewNode()},this.scrollTo=function(){var s;n.ListViewRef&&n.ListViewRef.scrollTo&&(s=n.ListViewRef).scrollTo.apply(s,arguments)},this.onRowHighlighted=function(s,a){n.setState({highlightedRow:{sectionID:s,rowID:a}})},this._onContentSizeChange=function(s,a){var t=n.props.horizontal?s:a;t!==n.scrollProperties.contentLength&&(n.scrollProperties.contentLength=t,n._renderMoreRowsIfNeeded()),n.props.onContentSizeChange&&n.props.onContentSizeChange(s,a)},this._onLayout=function(s){var a=s.nativeEvent.layout,t=a.width,e=a.height,o=n.props.horizontal?t:e;o!==n.scrollProperties.visibleLength&&(n.scrollProperties.visibleLength=o,n._renderMoreRowsIfNeeded()),n.props.onLayout&&n.props.onLayout(s)},this._maybeCallOnEndReached=function(s){return!!(n.props.onEndReached&&n.scrollProperties.contentLength!==n._sentEndForContentLength&&n._getDistanceFromEnd(n.scrollProperties)<n.props.onEndReachedThreshold&&n.state.curRenderedRowsCount===n.props.dataSource.getRowCount())&&(n._sentEndForContentLength=n.scrollProperties.contentLength,n.props.onEndReached(s),!0)},this._renderMoreRowsIfNeeded=function(){if(null===n.scrollProperties.contentLength||null===n.scrollProperties.visibleLength||n.state.curRenderedRowsCount===n.props.dataSource.getRowCount())return void n._maybeCallOnEndReached();var s=n._getDistanceFromEnd(n.scrollProperties);s<n.props.scrollRenderAheadDistance&&n._pageInNewRows()},this._pageInNewRows=function(){n.setState(function(s,a){var t=Math.min(s.curRenderedRowsCount+a.pageSize,a.dataSource.getRowCount());return n._prevRenderedRowsCount=s.curRenderedRowsCount,{curRenderedRowsCount:t}},function(){n._prevRenderedRowsCount=n.state.curRenderedRowsCount})},this._getDistanceFromEnd=function(n){return n.contentLength-n.visibleLength-n.offset},this._onScroll=function(s,a){n.ListViewRef&&(n.scrollProperties=a,n._maybeCallOnEndReached(s)||n._renderMoreRowsIfNeeded(),n.props.onEndReached&&n._getDistanceFromEnd(n.scrollProperties)>n.props.onEndReachedThreshold&&(n._sentEndForContentLength=null),n.props.onScroll&&n.props.onScroll(s))}};s["default"]=L,n.exports=s["default"]},267:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(s,"__esModule",{value:!0}),s.IndexedList=s.DataSource=void 0;var e=a(266),o=t(e),p=a(376),c=t(p);o["default"].IndexedList=c["default"];var u=o["default"].DataSource;s.DataSource=u,s.IndexedList=c["default"],s["default"]=o["default"]},268:function(n,s){"use strict";function a(n){var s=0;do isNaN(n.offsetTop)||(s+=n.offsetTop);while(n=n.offsetParent);return s}function t(n){return n.touches&&n.touches.length?n.touches[0]:n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n}function e(n,s){var a=!0,t=!0;return function(e){a&&(a=!1,setTimeout(function(){a=!0,n(e)},s),t&&(n(e),t=!1))}}function o(n,s){n.transform=s,n.webkitTransform=s,n.MozTransform=s}function p(n,s){n.transformOrigin=s,n.webkitTransformOrigin=s,n.MozTransformOrigin=s}Object.defineProperty(s,"__esModule",{value:!0}),s.getOffsetTop=a,s._event=t,s.throttle=e,s.setTransform=o,s.setTransformOrigin=p},309:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(s,"__esModule",{value:!0}),s["default"]=void 0;var e=a(2),o=t(e),p=a(3),c=t(p),u=a(5),i=t(u),l=a(4),r=t(l),k=a(1),d=t(k),f=a(267),h=t(f),g=a(233),m=t(g),v=h["default"].IndexedList,w=function(n){function s(){return(0,c["default"])(this,s),(0,i["default"])(this,n.apply(this,arguments))}return(0,r["default"])(s,n),s.prototype.render=function(){var n=this,s=this.props,a=s.prefixCls,t=s.listPrefixCls,e=(0,m["default"])(this.props,!0),p=e.restProps,c=e.extraProps;return d["default"].createElement(v,(0,o["default"])({ref:function(s){return n.indexedListRef=s},sectionHeaderClassName:a+"-section-header "+t+"-body",sectionBodyClassName:a+"-section-body "+t+"-body"},p,c),this.props.children)},s}(d["default"].Component);s["default"]=w,w.defaultProps={prefixCls:"am-indexed-list",listPrefixCls:"am-list",listViewPrefixCls:"am-list-view"},n.exports=s["default"]},330:function(n,s){},350:function(n,s,a){"use strict";function t(n){if(Array.isArray(n))return 0===n.length;if("object"==typeof n){if(n){e(n)&&void 0!==n.size?o(!1):void 0;for(var s in n)return!1}return!0}return!n}function e(n){return"undefined"!=typeof Symbol&&n[Symbol.iterator]}var o=a(247);n.exports=t},376:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}function e(n){window.document.body.scrollTop=n,window.document.documentElement.scrollTop=n}Object.defineProperty(s,"__esModule",{value:!0});var o=a(10),p=t(o),c=a(2),u=t(c),i=a(52),l=t(i),r=a(3),k=t(r),d=a(8),f=t(d),h=a(5),g=t(h),m=a(4),v=t(m),w=a(1),y=t(w),S=a(21),_=t(S),b=a(1),R=t(b),C=a(7),E=t(C),x=a(266),T=t(x),D=a(268),P=function(n){function s(n){(0,k["default"])(this,s);var a=(0,g["default"])(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return L.call(a),a.state={pageSize:n.pageSize,_delay:!1},a}return(0,v["default"])(s,n),(0,f["default"])(s,[{key:"componentDidMount",value:function(){this.dataChange(this.props),this.getQsInfo()}},{key:"componentWillReceiveProps",value:function(n){this.props.dataSource!==n.dataSource&&this.dataChange(n)}},{key:"componentDidUpdate",value:function(){this.getQsInfo()}},{key:"componentWillUnmount",value:function(){this._timer&&clearTimeout(this._timer),this._hCache=null}},{key:"renderQuickSearchBar",value:function(n,s){var a=this,t=this.props,e=t.dataSource,o=t.prefixCls,p=e.sectionIdentities.map(function(n){return{value:n,label:e._getSectionHeaderData(e._dataBlob,n)}});return y["default"].createElement("ul",{ref:function(n){return a.quickSearchBarRef=n},className:o+"-quick-search-bar",style:s,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,onTouchCancel:this.onTouchEnd},y["default"].createElement("li",{"data-qf-target":n.value,onClick:function(){return a.onQuickSearchTop(void 0,n.value)}},n.label),p.map(function(n){return y["default"].createElement("li",{key:n.value,"data-qf-target":n.value,onClick:function(){return a.onQuickSearch(n.value)}},n.label)}))}},{key:"render",value:function(){var n,s=this,a=this.state,t=a._delay,e=a.pageSize,o=this.props,c=o.className,i=o.prefixCls,r=o.children,k=o.quickSearchBarTop,d=o.quickSearchBarStyle,f=o.initialListSize,h=void 0===f?Math.min(20,this.props.dataSource.getRowCount()):f,g=o.showQuickSearchIndicator,m=o.renderSectionHeader,v=o.sectionHeaderClassName,w=(0,l["default"])(o,["className","prefixCls","children","quickSearchBarTop","quickSearchBarStyle","initialListSize","showQuickSearchIndicator","renderSectionHeader","sectionHeaderClassName"]);return y["default"].createElement("div",{className:i+"-container"},t&&this.props.delayActivityIndicator,y["default"].createElement(T["default"],(0,u["default"])({},w,{ref:function(n){return s.indexedListViewRef=n},className:(0,E["default"])(i,c),initialListSize:h,pageSize:e,renderSectionHeader:function(n,a){return y["default"].cloneElement(m(n,a),{ref:function(n){return s.sectionComponents[a]=n},className:v||i+"-section-header"})}}),r),this.renderQuickSearchBar(k,d),g?y["default"].createElement("div",{className:(0,E["default"])((n={},(0,p["default"])(n,i+"-qsindicator",!0),(0,p["default"])(n,i+"-qsindicator-hide",!g||!this.state.showQuickSearchIndicator),n)),ref:function(n){return s.qsIndicatorRef=n}}):null)}}]),s}(y["default"].Component);P.propTypes=(0,u["default"])({},T["default"].propTypes,{children:_["default"].any,prefixCls:_["default"].string,className:_["default"].string,sectionHeaderClassName:_["default"].string,quickSearchBarTop:_["default"].object,quickSearchBarStyle:_["default"].object,onQuickSearch:_["default"].func,showQuickSearchIndicator:_["default"].bool}),P.defaultProps={prefixCls:"rmc-indexed-list",quickSearchBarTop:{value:"#",label:"#"},onQuickSearch:function(){},showQuickSearchIndicator:!1,delayTime:100,delayActivityIndicator:""};var L=function(){var n=this;this.onQuickSearchTop=function(s,a){n.props.useBodyScroll?e(0):R["default"].findDOMNode(n.indexedListViewRef.ListViewRef).scrollTop=0,n.props.onQuickSearch(s,a)},this.onQuickSearch=function(s){var a=R["default"].findDOMNode(n.indexedListViewRef.ListViewRef),t=R["default"].findDOMNode(n.sectionComponents[s]);n.props.useBodyScroll?e(t.getBoundingClientRect().top-a.getBoundingClientRect().top+(0,D.getOffsetTop)(a)):a.scrollTop+=t.getBoundingClientRect().top-a.getBoundingClientRect().top,n.props.onQuickSearch(s)},this.onTouchStart=function(s){n._target=s.target,n._basePos=n.quickSearchBarRef.getBoundingClientRect(),document.addEventListener("touchmove",n._disableParent,!1),document.body.className=document.body.className+" "+n.props.prefixCls+"-qsb-moving",n.updateIndicator(n._target)},this.onTouchMove=function(s){if(s.preventDefault(),n._target){var a=(0,D._event)(s),t=n._basePos,e=void 0;if(a.clientY>=t.top&&a.clientY<=t.top+n._qsHeight){e=Math.floor((a.clientY-t.top)/n._avgH);var o=void 0;if(e in n._hCache&&(o=n._hCache[e][0]),o){var p=o.getAttribute("data-qf-target");n._target!==o&&(n.props.quickSearchBarTop.value===p?n.onQuickSearchTop(void 0,p):n.onQuickSearch(p),n.updateIndicator(o)),n._target=o}}}},this.onTouchEnd=function(){n._target&&(document.removeEventListener("touchmove",n._disableParent,!1),document.body.className=document.body.className.replace(new RegExp("\\s*"+n.props.prefixCls+"-qsb-moving","g"),""),n.updateIndicator(n._target,!0),n._target=null)},this.getQsInfo=function(){var s=n.quickSearchBarRef,a=s.offsetHeight,t=[];[].slice.call(s.querySelectorAll("[data-qf-target]")).forEach(function(n){t.push([n])});for(var e=a/t.length,o=0,p=0,c=t.length;p<c;p++)o=p*e,t[p][1]=[o,o+e];n._qsHeight=a,n._avgH=e,n._hCache=t},this.sectionComponents={},this.dataChange=function(s){var a=s.dataSource.getRowCount();a&&(n.setState({_delay:!0}),n._timer&&clearTimeout(n._timer),n._timer=setTimeout(function(){n.setState({pageSize:a,_delay:!1},function(){return n.indexedListViewRef._pageInNewRows()})},s.delayTime))},this.updateIndicator=function(s,a){var t=s;t.getAttribute("data-qf-target")||(t=t.parentNode),n.props.showQuickSearchIndicator&&(n.qsIndicatorRef.innerText=t.innerText.trim(),n.setState({showQuickSearchIndicator:!0}),n._indicatorTimer&&clearTimeout(n._indicatorTimer),n._indicatorTimer=setTimeout(function(){n.setState({showQuickSearchIndicator:!1})},1e3));var e=n.props.prefixCls+"-quick-search-bar-over";n._hCache.forEach(function(n){n[0].className=n[0].className.replace(e,"")}),a||(t.className=t.className+" "+e)},this._disableParent=function(n){n.preventDefault(),n.stopPropagation()}};s["default"]=P,n.exports=s["default"]},377:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}function e(n,s,a){return n[s][a]}function o(n,s){return n[s]}function p(n){for(var s=0,a=0;a<n.length;a++){var t=n[a];s+=t.length}return s}function c(n){if((0,h["default"])(n))return{};for(var s={},a=0;a<n.length;a++){var t=n[a];(0,m["default"])(!s[t],"Value appears more than once in array: "+t),s[t]=!0}return s}Object.defineProperty(s,"__esModule",{value:!0});var u=a(3),i=t(u),l=a(8),r=t(l),k=a(247),d=t(k),f=a(350),h=t(f),g=a(62),m=t(g),v=function(){function n(s){(0,i["default"])(this,n),(0,d["default"])(s&&"function"==typeof s.rowHasChanged,"Must provide a rowHasChanged function."),this._rowHasChanged=s.rowHasChanged,this._getRowData=s.getRowData||e,this._sectionHeaderHasChanged=s.sectionHeaderHasChanged,this._getSectionHeaderData=s.getSectionHeaderData||o,this._dataBlob=null,this._dirtyRows=[],this._dirtySections=[],this._cachedRowCount=0,this.rowIdentities=[],this.sectionIdentities=[]}return(0,r["default"])(n,[{key:"cloneWithRows",value:function(n,s){var a=s?[s]:null;return this._sectionHeaderHasChanged||(this._sectionHeaderHasChanged=function(){return!1}),this.cloneWithRowsAndSections({s1:n},["s1"],a)}},{key:"cloneWithRowsAndSections",value:function(s,a,t){(0,d["default"])("function"==typeof this._sectionHeaderHasChanged,"Must provide a sectionHeaderHasChanged function with section data."),(0,d["default"])(!a||!t||a.length===t.length,"row and section ids lengths must be the same");var e=new n({getRowData:this._getRowData,getSectionHeaderData:this._getSectionHeaderData,rowHasChanged:this._rowHasChanged,sectionHeaderHasChanged:this._sectionHeaderHasChanged});return e._dataBlob=s,a?e.sectionIdentities=a:e.sectionIdentities=Object.keys(s),t?e.rowIdentities=t:(e.rowIdentities=[],e.sectionIdentities.forEach(function(n){e.rowIdentities.push(Object.keys(s[n]))})),e._cachedRowCount=p(e.rowIdentities),e._calculateDirtyArrays(this._dataBlob,this.sectionIdentities,this.rowIdentities),e}},{key:"getRowCount",value:function(){return this._cachedRowCount}},{key:"getRowAndSectionCount",value:function(){return this._cachedRowCount+this.sectionIdentities.length}},{key:"rowShouldUpdate",value:function(n,s){var a=this._dirtyRows[n][s];return(0,m["default"])(void 0!==a,"missing dirtyBit for section, row: "+n+", "+s),a}},{key:"getRowData",value:function(n,s){var a=this.sectionIdentities[n],t=this.rowIdentities[n][s];return(0,m["default"])(void 0!==a&&void 0!==t,"rendering invalid section, row: "+n+", "+s),this._getRowData(this._dataBlob,a,t)}},{key:"getRowIDForFlatIndex",value:function(n){for(var s=n,a=0;a<this.sectionIdentities.length;a++){if(!(s>=this.rowIdentities[a].length))return this.rowIdentities[a][s];s-=this.rowIdentities[a].length}return null}},{key:"getSectionIDForFlatIndex",value:function(n){for(var s=n,a=0;a<this.sectionIdentities.length;a++){if(!(s>=this.rowIdentities[a].length))return this.sectionIdentities[a];s-=this.rowIdentities[a].length}return null}},{key:"getSectionLengths",value:function(){for(var n=[],s=0;s<this.sectionIdentities.length;s++)n.push(this.rowIdentities[s].length);return n}},{key:"sectionHeaderShouldUpdate",value:function(n){var s=this._dirtySections[n];return(0,m["default"])(void 0!==s,"missing dirtyBit for section: "+n),s}},{key:"getSectionHeaderData",value:function(n){if(!this._getSectionHeaderData)return null;var s=this.sectionIdentities[n];return(0,m["default"])(void 0!==s,"renderSection called on invalid section: "+n),this._getSectionHeaderData(this._dataBlob,s)}},{key:"_calculateDirtyArrays",value:function(n,s,a){for(var t=c(s),e={},o=0;o<a.length;o++){var p=s[o];(0,m["default"])(!e[p],"SectionID appears more than once: "+p),e[p]=c(a[o])}this._dirtySections=[],this._dirtyRows=[];for(var u,i=0;i<this.sectionIdentities.length;i++){var p=this.sectionIdentities[i];u=!t[p];var l=this._sectionHeaderHasChanged;!u&&l&&(u=l(this._getSectionHeaderData(n,p),this._getSectionHeaderData(this._dataBlob,p))),this._dirtySections.push(!!u),this._dirtyRows[i]=[];for(var r=0;r<this.rowIdentities[i].length;r++){var k=this.rowIdentities[i][r];u=!t[p]||!e[p][k]||this._rowHasChanged(this._getRowData(n,p,k),this._getRowData(this._dataBlob,p,k)),this._dirtyRows[i].push(!!u)}}}}]),n}();s["default"]=v,n.exports=s["default"]},378:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(s,"__esModule",{value:!0});var e=a(2),o=t(e),p=a(3),c=t(p),u=a(8),i=t(u),l=a(5),r=t(l),k=a(4),d=t(k),f=a(1),h=t(f),g=a(21),m=t(g),v=a(7),w=t(v),y=a(268),S={className:m["default"].string,prefixCls:m["default"].string,listPrefixCls:m["default"].string,listViewPrefixCls:m["default"].string,style:m["default"].object,contentContainerStyle:m["default"].object,onScroll:m["default"].func},_=function(n){function s(){var n,a,t,e;(0,c["default"])(this,s);for(var o=arguments.length,p=Array(o),u=0;u<o;u++)p[u]=arguments[u];return a=t=(0,r["default"])(this,(n=s.__proto__||Object.getPrototypeOf(s)).call.apply(n,[this].concat(p))),b.call(t),e=a,(0,r["default"])(t,e)}return(0,d["default"])(s,n),(0,i["default"])(s,[{key:"componentWillUpdate",value:function(n){this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||!this.handleScroll||(this.props.useBodyScroll?window.removeEventListener("scroll",this.handleScroll):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll))}},{key:"componentDidUpdate",value:function(n){var s=this;this.props.dataSource===n.dataSource&&this.props.initialListSize===n.initialListSize||!this.handleScroll||setTimeout(function(){s.props.useBodyScroll?window.addEventListener("scroll",s.handleScroll):s.ScrollViewRef.addEventListener("scroll",s.handleScroll)},0)}},{key:"componentDidMount",value:function(){var n=this,s=function(s){return n.props.onScroll&&n.props.onScroll(s,n.getMetrics())};this.props.scrollEventThrottle&&(s=(0,y.throttle)(s,this.props.scrollEventThrottle)),this.handleScroll=s,this.onLayout=function(){return n.props.onLayout({nativeEvent:{layout:{width:window.innerWidth,height:window.innerHeight}}})},this.props.useBodyScroll?(window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onLayout)):this.ScrollViewRef.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.props.useBodyScroll?(window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.onLayout)):this.ScrollViewRef.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var n=this,s=this.props,a=s.children,t=s.className,e=s.prefixCls,p=s.listPrefixCls,c=s.listViewPrefixCls,u=s.style,i=void 0===u?{}:u,l=s.contentContainerStyle,r=void 0===l?{}:l,k=s.useBodyScroll,d=s.pullToRefresh,f={position:"relative",overflow:"auto",WebkitOverflowScrolling:"touch",flex:1},g=e||c||"",m={ref:function(s){return n.ScrollViewRef=s},style:(0,o["default"])({},k?{}:f,i),className:(0,w["default"])(t,g+"-scrollview")},v={ref:function(s){return n.InnerScrollViewRef=s},style:(0,o["default"])({position:"absolute",minWidth:"100%"},r),className:(0,w["default"])(g+"-scrollview-content",p)},y=function(s){return h["default"].cloneElement(d,{getScrollContainer:s?function(){return document.body}:function(){return n.ScrollViewRef}},a)};return k?d?h["default"].createElement("div",m,y(!0)):h["default"].createElement("div",m,a):d?h["default"].createElement("div",m,h["default"].createElement("div",v,y())):h["default"].createElement("div",m,h["default"].createElement("div",v,a))}}]),s}(h["default"].Component);_.propTypes=S;var b=function(){var n=this;this.getMetrics=function(){var s=!n.props.horizontal;if(n.props.useBodyScroll){var a=document.scrollingElement?document.scrollingElement:document.body;return{visibleLength:window[s?"innerHeight":"innerWidth"],contentLength:n.ScrollViewRef[s?"scrollHeight":"scrollWidth"],offset:a[s?"scrollTop":"scrollLeft"]}}return{visibleLength:n.ScrollViewRef[s?"offsetHeight":"offsetWidth"],contentLength:n.ScrollViewRef[s?"scrollHeight":"scrollWidth"],offset:n.ScrollViewRef[s?"scrollTop":"scrollLeft"]}},this.getInnerViewNode=function(){return n.InnerScrollViewRef},this.scrollTo=function(){if(n.props.useBodyScroll){var s;(s=window).scrollTo.apply(s,arguments)}else n.ScrollViewRef.scrollLeft=arguments.length<=0?void 0:arguments[0],n.ScrollViewRef.scrollTop=arguments.length<=1?void 0:arguments[1]}};s["default"]=_,n.exports=s["default"]},396:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(s,"__esModule",{value:!0}),s["default"]=void 0;var e=a(2),o=t(e),p=a(3),c=t(p),u=a(5),i=t(u),l=a(4),r=t(l),k=a(1),d=t(k),f=a(959),h=t(f),g=a(63),m=t(g),v=function(n){function s(){return(0,c["default"])(this,s),(0,i["default"])(this,n.apply(this,arguments))}return(0,r["default"])(s,n),s.prototype.render=function(){var n=(0,o["default"])({activate:"\u677e\u5f00\u7acb\u5373\u5237\u65b0",deactivate:"\u4e0b\u62c9\u53ef\u4ee5\u5237\u65b0",release:d["default"].createElement(m["default"],{type:"loading"}),finish:"\u5b8c\u6210\u5237\u65b0"},this.props.indicator);return d["default"].createElement(h["default"],(0,o["default"])({},this.props,{indicator:n}))},s}(d["default"].Component);s["default"]=v,v.defaultProps={prefixCls:"am-pull-to-refresh"},n.exports=s["default"]},397:function(n,s,a){"use strict";a(6),a(23),a(527)},527:function(n,s){},671:function(n,s,a){n.exports={content:[],meta:{order:1,title:{"zh-CN":"ListView \u4e0b\u62c9\u5237\u65b0 (\u4ec5\u652f\u6301\u624b\u673a\u67e5\u770b\u6548\u679c)","en-US":"ListView PullToRefresh (see on phone)"},filename:"components/pull-to-refresh/demo/basic-listview.md",id:"components-pull-to-refresh-demo-basic-listview"},highlightedCode:["pre",{lang:"jsx",highlighted:'<span class="token comment" spellcheck="true">/* eslint no-dupe-keys: 0, no-mixed-operators: 0 */</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> PullToRefresh<span class="token punctuation">,</span> ListView <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd-mobile\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'Meet hotel\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'McDonald\\\'s invites you\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span>\n    img<span class="token punctuation">:</span> <span class="token string">\'https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png\'</span><span class="token punctuation">,</span>\n    title<span class="token punctuation">:</span> <span class="token string">\'Eat the week\'</span><span class="token punctuation">,</span>\n    des<span class="token punctuation">:</span> <span class="token string">\'\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> NUM_ROWS <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> pageIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">genData</span><span class="token punctuation">(</span>pIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dataArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_ROWS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dataArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`row - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>pIndex <span class="token operator">*</span> NUM_ROWS<span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dataArr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListView<span class="token punctuation">.</span>DataSource</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      rowHasChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>row1<span class="token punctuation">,</span> row2<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> row1 <span class="token operator">!==</span> row2<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      dataSource<span class="token punctuation">,</span>\n      refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment" spellcheck="true">// If you use redux, the data maybe at props, you need use `componentWillReceiveProps`</span>\n  <span class="token comment" spellcheck="true">// componentWillReceiveProps(nextProps) {</span>\n  <span class="token comment" spellcheck="true">//   if (nextProps.dataSource !== this.props.dataSource) {</span>\n  <span class="token comment" spellcheck="true">//     this.setState({</span>\n  <span class="token comment" spellcheck="true">//       dataSource: this.state.dataSource.cloneWithRows(nextProps.dataSource),</span>\n  <span class="token comment" spellcheck="true">//     });</span>\n  <span class="token comment" spellcheck="true">//   }</span>\n  <span class="token comment" spellcheck="true">// }</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> hei <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height <span class="token operator">-</span> ReactDOM<span class="token punctuation">.</span><span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lv<span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>\n    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">\'hidden\'</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        height<span class="token punctuation">:</span> hei<span class="token punctuation">,</span>\n        refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  onRefresh <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment" spellcheck="true">// simulate initial Ajax</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  onEndReached <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token comment" spellcheck="true">// load new data</span>\n    <span class="token comment" spellcheck="true">// hasMore: from backend data, indicates whether it is the last page, here is false</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoading <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasMore<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'reach end\'</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isLoading<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>rData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">genData</span><span class="token punctuation">(</span><span class="token operator">++</span>pageIndex<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        dataSource<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">.</span><span class="token function">cloneWithRows</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rData<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        isLoading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> separator <span class="token operator">=</span> <span class="token punctuation">(</span>sectionID<span class="token punctuation">,</span> rowID<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sectionID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rowID<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n          backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#F5F5F9\'</span><span class="token punctuation">,</span>\n          height<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>\n          borderTop<span class="token punctuation">:</span> <span class="token string">\'1px solid #ECECED\'</span><span class="token punctuation">,</span>\n          borderBottom<span class="token punctuation">:</span> <span class="token string">\'1px solid #ECECED\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">/></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> index <span class="token operator">=</span> data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> row <span class="token operator">=</span> <span class="token punctuation">(</span>rowData<span class="token punctuation">,</span> sectionID<span class="token punctuation">,</span> rowID<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        index <span class="token operator">=</span> data<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">const</span> obj <span class="token operator">=</span> data<span class="token punctuation">[</span>index<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n      <span class="token keyword">return</span> <span class="token punctuation">(</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>rowID<span class="token punctuation">}</span></span>\n          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n            padding<span class="token punctuation">:</span> <span class="token string">\'0 15px\'</span><span class="token punctuation">,</span>\n            backgroundColor<span class="token punctuation">:</span> <span class="token string">\'white\'</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token string">\'50px\'</span><span class="token punctuation">,</span> lineHeight<span class="token punctuation">:</span> <span class="token string">\'50px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#888\'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'18px\'</span><span class="token punctuation">,</span> borderBottom<span class="token punctuation">:</span> <span class="token string">\'1px solid #ddd\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token punctuation">{</span>obj<span class="token punctuation">.</span>title<span class="token punctuation">}</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">\'-webkit-box\'</span><span class="token punctuation">,</span> display<span class="token punctuation">:</span> <span class="token string">\'flex\'</span><span class="token punctuation">,</span> padding<span class="token punctuation">:</span> <span class="token string">\'15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token string">\'63px\'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">\'63px\'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">\'15px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>obj<span class="token punctuation">.</span>img<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">\'inline-block\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token punctuation">:</span> <span class="token string">\'8px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#000\'</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'16px\'</span><span class="token punctuation">,</span> overflow<span class="token punctuation">:</span> <span class="token string">\'hidden\'</span><span class="token punctuation">,</span> textOverflow<span class="token punctuation">:</span> <span class="token string">\'ellipsis\'</span><span class="token punctuation">,</span> whiteSpace<span class="token punctuation">:</span> <span class="token string">\'nowrap\'</span><span class="token punctuation">,</span> maxWidth<span class="token punctuation">:</span> <span class="token string">\'250px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>obj<span class="token punctuation">.</span>des<span class="token punctuation">}</span><span class="token operator">-</span><span class="token punctuation">{</span>rowData<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'16px\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> fontSize<span class="token punctuation">:</span> <span class="token string">\'30px\'</span><span class="token punctuation">,</span> color<span class="token punctuation">:</span> <span class="token string">\'#FF6E27\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>rowID<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> \u5143<span class="token operator">/</span>\u4efb\u52a1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ListView</span>\n        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>el <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>lv <span class="token operator">=</span> el<span class="token punctuation">}</span></span>\n        <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dataSource<span class="token punctuation">}</span></span>\n        <span class="token attr-name">renderHeader</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>Pull to refresh<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">renderFooter</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div style<span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> padding<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> textAlign<span class="token punctuation">:</span> <span class="token string">\'center\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoading <span class="token operator">?</span> <span class="token string">\'Loading...\'</span> <span class="token punctuation">:</span> <span class="token string">\'Loaded\'</span><span class="token punctuation">}</span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n        renderRow<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">}</span>\n        renderSeparator<span class="token operator">=</span><span class="token punctuation">{</span>separator<span class="token punctuation">}</span>\n        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n          height<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n          border<span class="token punctuation">:</span> <span class="token string">\'1px solid #ddd\'</span><span class="token punctuation">,</span>\n          margin<span class="token punctuation">:</span> <span class="token string">\'5px 0\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span>\n        pullToRefresh<span class="token operator">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PullToRefresh</span>\n          <span class="token attr-name">refreshing</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>refreshing<span class="token punctuation">}</span></span>\n          <span class="token attr-name">onRefresh</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onRefresh<span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span><span class="token punctuation">}</span>\n        onEndReached<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onEndReached<span class="token punctuation">}</span>\n        pageSize<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">}</span>\n      <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>'
}],preview:function(){function n(n){return n&&n.__esModule?n:{"default":n}}function s(n,s){for(var a=Object.getOwnPropertyNames(s),t=0;t<a.length;t++){var e=a[t],o=Object.getOwnPropertyDescriptor(s,e);o&&o.configurable&&void 0===n[e]&&Object.defineProperty(n,e,o)}return n}function t(n,s,a){return s in n?Object.defineProperty(n,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[s]=a,n}function e(n){if(Array.isArray(n)){for(var s=0,a=Array(n.length);s<n.length;s++)a[s]=n[s];return a}return Array.from(n)}function o(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function p(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}function c(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):s(n,a))}function u(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=[],a=0;a<g;a++)s.push("row - "+(n*g+a));return s}var i=a(1),l=a(1),r=(a(397),a(396)),k=n(r),d=(a(218),a(217)),f=n(d),h=[{img:"https://zos.alipayobjects.com/rmsportal/dKbkpPXKfvZzWCM.png",title:"Meet hotel",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"},{img:"https://zos.alipayobjects.com/rmsportal/XmwCzSeJiqpkuMB.png",title:"McDonald's invites you",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"},{img:"https://zos.alipayobjects.com/rmsportal/hfVtzEhPzTUewPm.png",title:"Eat the week",des:"\u4e0d\u662f\u6240\u6709\u7684\u517c\u804c\u6c6a\u90fd\u9700\u8981\u98ce\u5439\u65e5\u6652"}],g=20,m=0,v=function(n){function s(a){o(this,s);var t=p(this,n.call(this,a));t.onRefresh=function(){t.setState({refreshing:!0,isLoading:!0}),setTimeout(function(){t.rData=u(),t.setState({dataSource:t.state.dataSource.cloneWithRows(t.rData),refreshing:!1,isLoading:!1})},600)},t.onEndReached=function(n){t.state.isLoading&&!t.state.hasMore||(console.log("reach end",n),t.setState({isLoading:!0}),setTimeout(function(){t.rData=[].concat(e(t.rData),e(u(++m))),t.setState({dataSource:t.state.dataSource.cloneWithRows(t.rData),isLoading:!1})},1e3))};var c=new f["default"].DataSource({rowHasChanged:function(n,s){return n!==s}});return t.state={dataSource:c,refreshing:!0,isLoading:!0,height:document.documentElement.clientHeight},t}return c(s,n),s.prototype.componentDidMount=function(){var n=this,s=this.state.height-l.findDOMNode(this.lv).offsetTop;document.body.style.overflow="hidden",setTimeout(function(){n.setState({dataSource:n.state.dataSource.cloneWithRows(u()),height:s,refreshing:!1})},2e3)},s.prototype.render=function(){var n=this,s=function(n,s){return i.createElement("div",{key:n+"-"+s,style:{backgroundColor:"#F5F5F9",height:8,borderTop:"1px solid #ECECED",borderBottom:"1px solid #ECECED"}})},a=h.length-1,e=function(n,s,e){var o;a<0&&(a=h.length-1);var p=h[a--];return i.createElement("div",{key:e,style:{padding:"0 15px",backgroundColor:"white"}},i.createElement("div",{style:{height:"50px",lineHeight:"50px",color:"#888",fontSize:"18px",borderBottom:"1px solid #ddd"}},p.title),i.createElement("div",{style:(o={display:"-webkit-box"},t(o,"display","flex"),t(o,"padding","15px"),o)},i.createElement("img",{style:{height:"63px",width:"63px",marginRight:"15px"},src:p.img,alt:""}),i.createElement("div",{style:{display:"inline-block"}},i.createElement("div",{style:{marginBottom:"8px",color:"#000",fontSize:"16px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"250px"}},p.des,"-",n),i.createElement("div",{style:{fontSize:"16px"}},i.createElement("span",{style:{fontSize:"30px",color:"#FF6E27"}},e)," \u5143/\u4efb\u52a1"))))};return i.createElement(f["default"],{ref:function(s){return n.lv=s},dataSource:this.state.dataSource,renderHeader:function(){return i.createElement("span",null,"Pull to refresh")},renderFooter:function(){return i.createElement("div",{style:{padding:30,textAlign:"center"}},n.state.isLoading?"Loading...":"Loaded")},renderRow:e,renderSeparator:s,style:{height:this.state.height,border:"1px solid #ddd",margin:"5px 0"},pullToRefresh:i.createElement(k["default"],{refreshing:this.state.refreshing,onRefresh:this.onRefresh}),onEndReached:this.onEndReached,pageSize:5})},s}(i.Component);return i.createElement(v,null)}}},672:function(n,s,a){n.exports={content:[],meta:{order:0,title:{"zh-CN":"\u62c9\u52a8\u5237\u65b0 (\u4ec5\u652f\u6301\u624b\u673a\u67e5\u770b\u6548\u679c)","en-US":"PullToRefresh (see on phone)"},filename:"components/pull-to-refresh/demo/basic.md",id:"components-pull-to-refresh-demo-basic"},highlightedCode:["pre",{lang:"jsx",highlighted:'<span class="token keyword">import</span> <span class="token punctuation">{</span> PullToRefresh<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd-mobile\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dataArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    dataArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> dataArr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n      down<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>\n      data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> hei <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height <span class="token operator">-</span> ReactDOM<span class="token punctuation">.</span><span class="token function">findDOMNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ptr<span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      height<span class="token punctuation">:</span> hei<span class="token punctuation">,</span>\n      data<span class="token punctuation">:</span> <span class="token function">genData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token punctuation">:</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> down<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n      <span class="token punctuation">></span></span>\n        direction<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'down\'</span> <span class="token punctuation">:</span> <span class="token string">\'up\'</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Button</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PullToRefresh</span>\n        <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>el <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>ptr <span class="token operator">=</span> el<span class="token punctuation">}</span></span>\n        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n          height<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">,</span>\n          overflow<span class="token punctuation">:</span> <span class="token string">\'auto\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">indicator</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> deactivate<span class="token punctuation">:</span> <span class="token string">\'\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0\'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">direction</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'down\'</span> <span class="token punctuation">:</span> <span class="token string">\'up\'</span><span class="token punctuation">}</span></span>\n        <span class="token attr-name">refreshing</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>refreshing<span class="token punctuation">}</span></span>\n        <span class="token attr-name">onRefresh</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> refreshing<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span></span><span class="token attr-name">,</span> <span class="token attr-name">1000);</span>\n        <span class="token attr-name">}}</span>\n      <span class="token punctuation">></span></span>\n        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token punctuation">:</span> <span class="token string">\'center\'</span><span class="token punctuation">,</span> padding<span class="token punctuation">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span>\n            <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>down <span class="token operator">?</span> <span class="token string">\'pull down\'</span> <span class="token punctuation">:</span> <span class="token string">\'pull up\'</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>i<span class="token punctuation">}</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PullToRefresh</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Demo</span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span> mountNode<span class="token punctuation">)</span><span class="token punctuation">;</span>'}],preview:function(){function n(n){return n&&n.__esModule?n:{"default":n}}function s(n,s){for(var a=Object.getOwnPropertyNames(s),t=0;t<a.length;t++){var e=a[t],o=Object.getOwnPropertyDescriptor(s,e);o&&o.configurable&&void 0===n[e]&&Object.defineProperty(n,e,o)}return n}function t(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function e(n,s){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?n:s}function o(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):s(n,a))}function p(){for(var n=[],s=0;s<20;s++)n.push(s);return n}var c=a(1),u=a(1),i=(a(397),a(396)),l=n(i),r=(a(43),a(65)),k=n(r),d=function(n){function s(a){t(this,s);var o=e(this,n.call(this,a));return o.state={refreshing:!1,down:!0,height:document.documentElement.clientHeight,data:[]},o}return o(s,n),s.prototype.componentDidMount=function(){var n=this,s=this.state.height-u.findDOMNode(this.ptr).offsetTop;setTimeout(function(){return n.setState({height:s,data:p()})},0)},s.prototype.render=function(){var n=this;return c.createElement("div",null,c.createElement(k["default"],{style:{marginBottom:15},onClick:function(){return n.setState({down:!n.state.down})}},"direction: ",this.state.down?"down":"up"),c.createElement(l["default"],{ref:function(s){return n.ptr=s},style:{height:this.state.height,overflow:"auto"},indicator:this.state.down?{}:{deactivate:"\u4e0a\u62c9\u53ef\u4ee5\u5237\u65b0"},direction:this.state.down?"down":"up",refreshing:this.state.refreshing,onRefresh:function(){n.setState({refreshing:!0}),setTimeout(function(){n.setState({refreshing:!1})},1e3)}},this.state.data.map(function(s){return c.createElement("div",{key:s,style:{textAlign:"center",padding:20}},n.state.down?"pull down":"pull up"," ",s)})))},s}(c.Component);return c.createElement(d,null)}}},762:function(n,s,a){n.exports={"basic-listview":a(671),basic:a(672)}},958:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}function e(n,s){n.transform=s,n.webkitTransform=s,n.MozTransform=s}Object.defineProperty(s,"__esModule",{value:!0});var o=a(2),p=t(o),c=a(3),u=t(c),i=a(8),l=t(i),r=a(5),k=t(r),d=a(4),f=t(d),h=a(1),g=t(h),m=a(7),v=t(m),w=function(n,s){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&s.indexOf(t)<0&&(a[t]=n[t]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,t=Object.getOwnPropertySymbols(n);e<t.length;e++)s.indexOf(t[e])<0&&(a[t[e]]=n[t[e]]);return a},y=function(n){function s(){return(0,u["default"])(this,s),(0,k["default"])(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return(0,f["default"])(s,n),(0,l["default"])(s,[{key:"shouldComponentUpdate",value:function(n){return n.shouldUpdate}},{key:"render",value:function(){return g["default"].createElement("div",null,this.props.render())}}]),s}(g["default"].Component),S="down",_="up",b={activate:"release",deactivate:"pull",release:"loading",finish:"finish"},R=function(n){function s(){(0,u["default"])(this,s);var n=(0,k["default"])(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments));return n.state={currSt:"",dragOnEdge:!1},n.shouldUpdateChildren=!1,n.triggerPullToRefresh=function(){n.state.dragOnEdge||(n.props.refreshing?(n.props.direction===_&&(n._lastScreenY=-n.props.distanceToRefresh-1),n.props.direction===S&&(n._lastScreenY=n.props.distanceToRefresh+1),n.setState({currSt:"release"},function(){return e(n.contentRef.style,"translate3d(0px,"+n._lastScreenY+"px,0)")})):n.setState({currSt:"finish"},function(){return n.reset()}))},n.init=function(s){s&&(n._to={touchstart:n.onTouchStart.bind(n,s),touchmove:n.onTouchMove.bind(n,s),touchend:n.onTouchEnd.bind(n,s),touchcancel:n.onTouchEnd.bind(n,s)},Object.keys(n._to).forEach(function(a){s.addEventListener(a,n._to[a])}))},n.destroy=function(s){n._to&&s&&Object.keys(n._to).forEach(function(a){s.removeEventListener(a,n._to[a])})},n.onTouchStart=function(s,a){n._ScreenY=n._startScreenY=a.touches[0].screenY,n._lastScreenY=n._lastScreenY||0},n.isEdge=function(s,a){var t=n.props.getScrollContainer();if(t&&t===document.body){var e=document.scrollingElement?document.scrollingElement:document.body;if(a===_)return e.scrollHeight-e.scrollTop<=window.innerHeight;if(a===S)return e.scrollTop<=0}return a===_?s.scrollHeight-s.scrollTop===s.clientHeight:a===S?s.scrollTop<=0:void 0},n.onTouchMove=function(s,a){var t=a.touches[0].screenY,o=n.props.direction;if(!(o===_&&n._startScreenY<t||o===S&&n._startScreenY>t)&&n.isEdge(s,o)){n.state.dragOnEdge||n.setState({dragOnEdge:!0});var p=Math.round(t-n._ScreenY);n._ScreenY=t,n._lastScreenY+=p,e(n.contentRef.style,"translate3d(0px,"+n._lastScreenY+"px,0)"),Math.abs(n._lastScreenY)<n.props.distanceToRefresh?"deactivate"!==n.state.currSt&&n.setState({currSt:"deactivate"}):"deactivate"===n.state.currSt&&n.setState({currSt:"activate"})}},n.onTouchEnd=function(){n.state.dragOnEdge&&n.setState({dragOnEdge:!1}),"activate"===n.state.currSt?(n.setState({currSt:"release"}),n._timer=setTimeout(function(){n.props.refreshing||n.setState({currSt:"finish"},function(){return n.reset()}),n._timer=void 0},1e3),n.props.onRefresh()):n.reset()},n.reset=function(){n._lastScreenY=0,e(n.contentRef.style,"translate3d(0px,0px,0)")},n}return(0,f["default"])(s,n),(0,l["default"])(s,[{key:"shouldComponentUpdate",value:function(n){return this.shouldUpdateChildren=this.props.children!==n.children,!0}},{key:"componentDidUpdate",value:function(n){n!==this.props&&n.refreshing!==this.props.refreshing&&this.triggerPullToRefresh()}},{key:"componentDidMount",value:function(){var n=this;setTimeout(function(){n.init(n.props.getScrollContainer()||n.containerRef),n.triggerPullToRefresh()})}},{key:"componentWillUnmount",value:function(){this.destroy(this.props.getScrollContainer()||this.containerRef)}},{key:"render",value:function(){var n=this,s=this.props,a=s.className,t=s.prefixCls,e=s.children,o=s.getScrollContainer,c=s.direction,u=(s.onRefresh,s.refreshing,s.indicator),i=(s.distanceToRefresh,w(s,["className","prefixCls","children","getScrollContainer","direction","onRefresh","refreshing","indicator","distanceToRefresh"])),l=g["default"].createElement(y,{shouldUpdate:this.shouldUpdateChildren,render:function(){return e}}),r=function(s){var a=(0,v["default"])(s,!n.state.dragOnEdge&&t+"-transition");return g["default"].createElement("div",{className:t+"-content-wrapper"},g["default"].createElement("div",{className:a,ref:function(s){return n.contentRef=s}},c===_?l:null,g["default"].createElement("div",{className:t+"-indicator"},u[n.state.currSt]||b[n.state.currSt]),c===S?l:null))};return o()?r(t+"-content "+t+"-"+c):g["default"].createElement("div",(0,p["default"])({ref:function(s){return n.containerRef=s},className:(0,v["default"])(a,t,t+"-"+c)},i),r(t+"-content"))}}]),s}(g["default"].Component);s["default"]=R,R.defaultProps={prefixCls:"rmc-pull-to-refresh",getScrollContainer:function(){},direction:S,distanceToRefresh:25,indicator:b},n.exports=s["default"]},959:function(n,s,a){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(s,"__esModule",{value:!0});var e=a(958),o=t(e);s["default"]=o["default"],n.exports=s["default"]}});